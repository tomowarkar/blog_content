<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="initial-scale=1.0"/>
    <title>モーション</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js" type="text/javascript"></script>
    <script>
      'use strict';
      var vect = {x:0, y:0, z:0};
	    var vectxlogs = [];

      window.addEventListener("devicemotion", function(e){
				Devicemotion(e)
			}, true);

      function Devicemotion(e){
        vect.x = e.accelerationIncludingGravity.x;
        vect.y = e.accelerationIncludingGravity.y;
        vect.z = e.accelerationIncludingGravity.z;

	      vectxlogs.push(vect.x);
        Reloadresult1()
      }

      function Reloadresult1(){
        var dxend = vectxlogs[vectxlogs.length - 1];
        var dx = 0;
        if (vectxlogs.length>300){
          dx = parseInt(vectxlogs[vectxlogs.length - 300]) - parseInt(vectxlogs[vectxlogs.length - 1]);
        }


        var result1 = document.getElementById("result1");
        result1.innerHTML =
          "X："+ Math.round(vect.x * 10) / 10 +"<br>" +
          "Y："+ Math.round(vect.y * 10) / 10 +"<br>" +
          "Z："+ Math.round(vect.z * 10) / 10 +"<br>" +
		vectxlogs.length + "<br>" + dx;
	 var lineChartData = {
        labels : "x軸",
        datasets : [
          {
            data : vectxlogs
          }
        ]
      }



      window.onload = function(){
        var ctx = document.getElementById("graph-area").getContext("2d");
        window.myLine = new Chart(ctx).Line(lineChartData);
      }
      }


    </script>
  </head>
  <body>
    <canvas id="graph-area" height="450" width="600"></canvas>
    <div id="result1"></div>
  </body>
</html>
